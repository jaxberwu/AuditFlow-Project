# Node.js 使用场景说明

## ❓ 常见困惑：到底需不需要 Node.js？

### ✅ 你的理解完全正确！

**简短答案**:

- **本地开发/测试环境（临时搭建）**: ✅ 需要 Node.js
- **生产环境服务器（IIS）**: ❌ 不需要 Node.js

---

## 📋 详细说明

### 场景 1: 本地开发/测试环境（临时搭建）

**需要 Node.js** ✅

**用途**: 
- 这是**临时的开发服务器**，用于本地开发和测试
- Vite 开发服务器需要 Node.js 运行

**原因**:
1. **安装依赖**: `npm install` 需要 Node.js
2. **运行开发服务器**: `npm run dev` 需要 Node.js（Vite 开发服务器）
3. **构建前端**: `npm run build` 需要 Node.js（构建后就不需要了）

**步骤**:
```powershell
# 1. 安装 Node.js（必需）
# 2. 安装依赖
cd AuditFlow.UI
npm install

# 3. 运行开发服务器（临时服务，需要 Node.js）
npm run dev  # 启动 Vite 开发服务器（Port 5173）
```

**结论**: **这只是临时的开发服务器，不是生产环境**

---

### 场景 2: 生产环境服务器（IIS）

**不需要 Node.js** ❌

**用途**: 
- 这是**正式的生产环境服务器**
- IIS 直接提供静态文件，不需要 Node.js

**原因**:
1. 前端已经构建为静态文件（`dist/` 目录）
2. IIS 直接提供静态文件（HTML/CSS/JS）
3. 不需要任何 JavaScript 运行时（不需要 Node.js）

**步骤**:
```powershell
# 1. 在开发机器上构建（需要 Node.js）
cd AuditFlow.UI
npm run build  # 生成 dist/ 目录（静态文件）

# 2. 将 dist/ 目录复制到 IIS 服务器
# 3. 配置 IIS 网站指向 dist/ 目录
# 4. IIS 直接提供静态文件，不需要 Node.js
```

**结论**: **IIS 服务器上不需要安装 Node.js**

---

## 🎯 总结对比

| 场景 | 是否需要 Node.js | 说明 |
|------|-----------------|------|
| **本地开发/测试**<br>（临时搭建） | ✅ **需要** | 运行 `npm run dev` 启动 Vite 开发服务器<br>这是**临时的开发服务器** |
| **IIS 生产服务器**<br>（正式部署） | ❌ **不需要** | IIS 直接提供静态文件（dist/ 目录）<br>不需要 Node.js 运行时 |

---

## 💡 为什么会有误解？

### 正确理解

- **本地临时搭建（开发服务器）** = 需要 Node.js ✅
  - 用于运行 `npm run dev`（Vite 开发服务器）
  - 这是**临时的服务环境**，不是生产环境
  
- **IIS 生产服务器** = 不需要 Node.js ❌
  - IIS 直接提供静态文件
  - 不需要 Node.js 运行时

---

## ✅ 明确答案

### 你的情况

#### 场景 A: 本地开发/测试（临时搭建）

**答案**: ✅ **需要 Node.js**

**原因**:
- 需要运行 `npm install` 安装依赖
- 需要运行 `npm run dev` 启动 Vite 开发服务器
- **这是临时的开发服务器，用于本地测试**

#### 场景 B: IIS 生产服务器部署

**答案**: ❌ **不需要 Node.js**

**原因**:
- 先在本地构建前端（`npm run build`）
- 将 `dist/` 目录部署到 IIS
- IIS 直接提供静态文件，不需要 Node.js

### 什么时候不需要 Node.js？

**答案**: 只在以下情况不需要：

1. **生产环境服务器**（前端已构建为静态文件）
2. **只部署后端服务**（不使用前端）
3. **只查看代码**（不运行前端）

---

## 📝 安装建议

### 如果要在新电脑上完整运行系统

**必须安装**:
1. ✅ .NET 9 SDK（运行后端）
2. ✅ Node.js 18+（运行前端）
3. ✅ SQL Server LocalDB（数据库）

**三者缺一不可** ✅

---

**最后更新**: 2026-01-20
